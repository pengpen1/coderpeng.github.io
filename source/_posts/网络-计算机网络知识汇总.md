---
title: 计算机网络知识汇总
date: 2024-01-21 13:15:00
tags: 网络
categories: 网络
cover: https://cdn.jsdelivr.net/gh/pengpen1/blog-images/street-8434099_1280.jpg
top_img: https://jsd.012700.xyz/gh/jerryc127/CDN@latest/cover/default_bg.png
---
**概要：**本文主要是带领大家学习数据是如何在网络中传输的，以及计算机网络相关的知识点。

### 前言

计算机最初只是孤立的一个运算机器，随着业务需求的不断发展，单台孤立的计算机已经不能够满足我们的需求，因此人们把一个区域内的多台计算机连接成一个网络即局域网，然而这些小的网络并不能满足对计算机日益增长的需求，因此把不同的局域网连接成一个全球性质的网络，我们称之为互联网，互联网就是把不同的局域网通过路由器连接起来的网络。

**1.广域网、局域网、WLAN**

广域网（Wide Area Network），简称WAN，是一种地域范围覆盖广的计算机网络的集合，通常所覆盖的范围从几十公里到几千公里，它能连接多个地区、城市和国家。由于其超长的覆盖范围，发送介质主要是政府或者大型企业部署的电话线或光纤，因此又被大家亲切的称为：外网、公网。

局域网（Local Area Network），简称LAN，相对于广域网（WAN）而言，主要是指在某一区域的计算机互联网络。“某一区域”指的是同一办公室、同一建筑物、同一公司和同一学校等，一般是方圆几千米以内。

更通俗地讲，你用手机上的移动网路，浏览网页时用到就是运营商体提供的WAN，即广域网。打开手机连接路由器，再访问网页，手机使用的就是局域网。是的，路由器这种工具往往充当广域网与局域网接入的“中间媒介”。

WLAN和有线局域网最大的区别就是“无线”。无线局域网WLAN的范围实际上很广，按照定义，以各种无线电波（如激光、红外线等）的无线信道来代替有线局域网中的部分或全部传输介质所构成的网络都叫WLAN。但是，由于一些技术比如WiFi、蓝牙使用的很多，以至于它们几乎代表了WLAN。实际上，WLAN是指一种网络组织架构，而WiFi是WLAN中的技术标准之一罢了。

局域网内部通过MAC地址寻址，而网络间的寻址是通过IP地址进行的。在局域网内部，通信的基本单位是帧（Frame），而帧中包含了源和目的设备的MAC地址。因此，局域网内部的通信确实是通过MAC地址进行寻址的。相反，在网络间通信时，通信的基本单位是数据包（Packet），而数据包中包含了源和目的设备的IP地址。因此，网络间的通信主要依赖于IP地址进行寻址。

如果通信双方在**同一局域网内**，可直接通过**数据链路层**进行相互通信，如果通信双方在**不同网络内**，则要通过**三层地址（如IP地址）**进行。

**2.网卡、网卡驱动**

网卡是计算机中用于连接到网络的硬件设备，负责将计算机的数据转换成网络可识别的信号并进行传输。网卡通过物理接口（如以太网端口）与计算机连接，使计算机能够与网络通信。

网卡驱动是软件程序，用于让操作系统能够理解和控制网卡硬件。它充当操作系统与网卡之间的桥梁，确保它们能够正确交互。

网卡是硬件设备，而网卡驱动是软件，两者紧密合作。网卡需要正确的驱动程序来与操作系统协同工作，以便在网络上发送和接收数据。

**3.防火墙**

防火墙是一种网络安全解决方案，可保护您的网络免受多余流量的影响。防火墙基于一组预编程的规则阻止外来的恶意软件。这些规则还可以防止网络中的用户访问某些站点和程序。

几乎所有防火墙都是状态型的，并分为两种通用类型：网络防火墙和基于主机的防火墙。基于主机或计算机的防火墙只保护一台计算机或"主机"， 通常部署在家中或个人设备上，通常与操作系统成套提供。

另一方面，防火墙网络可保护通过分界点的所有设备和流量，从而实现了较大的可扩展性。顾名思义，网络防火墙在网络层面发挥作用，即 OSI 第 3 和 4 层，扫描外部来源和局域网 (LAN) 之间的流量，或网络内不同网络段之间的流量。它们被放置在网络或网络段的周界作为第一道防线，并通过执行深入的数据包监测和数据包过滤来监控流量。如果数据包的内容不符合此前基于网络管理员或安全团队创建的规则选定的条件，则防火墙 会拒绝并阻止该流量。 



### 网络的分层架构

我们一开始接触网络的时候，看到什么应用层，数据链路层就感到头疼，就会想为什么要这么多层呢？这是为了有更好的扩展性，可维护性，从物理层到应用层，每一层都有其特定的职责。这种分层设计在网络通信中被广泛应用，以实现高效、可靠的数据传输。

数据在传输的过程中，可能出现丢包，数据重复的问题，所以网络要效验数据的完整性，不可谓不复杂，所以让每一层专注于自己的职责，只管对接上一层和一层的接口就行，这样后面更换这一层的程序或者进行扩展就会更方便。这里我们来看下TCP/IP协议簇：

| 名称       | 协议或代表                     | 作用                                                         |
| ---------- | ------------------------------ | ------------------------------------------------------------ |
| 应用层     | DNS，HTTP，SSH，SMTP，FTP...   |                                                              |
| 传输层     | TCP，UDP，SCTP(流控制传输协议) |                                                              |
| 网络层     | IPv4，IPv6，ARP，ICMP          | 屏蔽网络差异，提供透明传输<br />为网络间通信提供路由选择<br />数据包封装和解封装<br />拥塞控制 |
| 数据链路层 | 以太网(Ethernet)，无线LAN      | 将网络层传递下来的数据包封装成帧<br />错误检测和纠正、流量控制、帧同步 |
| 物理层     | 光纤，双绞线电缆，无线设备     | 传输原始比特流                                               |



**1.物理层**

位于各**计算机网络体系**的**最低层**，负责在**物理传输介质**之上为“数据链路层”提供一个**原始比特流**（也就是数据是以一个个0或1的二进制代码形式表示的）的**物理连接**。物理层并不是特指某种传输介质，而是指通过**传输介质**，以及相关的**通信协议**、**标准**建立起来的物理线路。



**2.数据链路层**

数据链路层是计算机网络体系结构中的第二层，位于物理层之上，网络层之下。它的主要任务是在直接相连的两个节点之间提供可靠的**数据传输服务**。数据链路层负责将网络层传递下来的数据包**封装成帧**，并通过物理层进行传输。此外，数据链路层还处理错误检测和纠正、流量控制、帧同步等功能。

数据链路层的作用，则是将网络层下发的数据包，根据自己所处的网络类型，将其封装成帧数据以后发送给下一跳地址。以ip数据包传输为例，首先ip层通过目标地址，在路由表中找到数据包通往目的需要经过的下一跳ip地址，并传给数据链路层，数据链路层根据ip，通过arp协议找到该ip地址所对应机器的mac地址，最后根据自己所处的网络对应的链路层协议，将数据包封装成帧以后，发给拥有该mac地址的机器。

![](https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240122161906.png)

**环回地址：**本机内不同的进程，可以通过TCP/IP协议来进行通信，当数据包到达数据链路层时，如果判断数据包发往本机，则直接发送过去，否则通过ARP协议获取的以太网MAC地址，将数据封装成帧后，发往该MAC地址所属的机器上。

![](https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240122164648.png)



**3.网络层**

当源端和目的端**位于不同网络**（物理上分隔开的计算机网络，可以是不同的局域网（LAN）、广域网（WAN）或者全球互联网。这些网络可能由不同的组织、公司或个体管理，拥有独立的地址空间和网络规则）的时候，**直接通信是不可行**的，此时就需要由**网络层**解决（通过路由选择、拥塞控制等功能）。

如果我们把物理层和数据链路层比作市内交通，那么**网络层**就可以比作**连接不同城市交通的中转车站、机场或码头。**网络层可以把**来自其他网络中的数据**传送到**下一个途经的网络或本网络中**的目的节点。

![](https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240123110707.png)

网络层的数据交换技术主要是指**网络中间结点**所提供的**数据交换功能**，这些中间结点并不关心数据内容，只提供一个交换设备，把数据从一个结点转发到另一个结点，直至达到目的端。

这里主要说一下报文交换和分组交换：

- 报文交换就是先在中间结点上进行缓存（这类中间结点通常是由具有存储能力的交换机、路由器承担），然后再由中间结点在线路空闲时把数据发送出去。
- 分组交换就说将报文根据各网络传输规定的**MTU**（最大传输单元）分成**多个组，**进行传输**。**在要转发的数据包头部加上源节点和目的节点的IP地址，成为数据报，然后通过路由技术一级级地把数据转发下去。各结点可根据数据报中所包括的地址和路由信息，选择不同的路由路径进行发送。另外，各个结点也可能随时根据网络的流量、故障等情况选择最佳路径。



ARP和RARP协议：

- ARP协议的作用就是，在一个局域网内，当一台主机要查找某个IP所对应机器的MAC地址时，会向局域网内所有的机器广播这个请求，并捎带自己的MAC地址，当其查找的机器，收到该数据包时，会记录请求机器的ip和mac地址，并将自己的mac地址和ip返回给请求者，这就是ARP协议做的事情，本质上是通过ip去查找mac地址。
- RARP的作用是，将mac地址转换成ip地址



IP协议，如IPv4，用于将多个分组交换网络（数据报交换方式）连接起来的最典型通信协议。该协议是无连接的服务，负责在源地址和目的地址之间传送数据报，然后为了适应不同网络对分组大小的要求，需要对上层传来的报文进行分割，最后调用本地网络协议将数据报传送给下一个网关或目的计算机



**4.传输层**

TODO

**5.应用层**

TODO

### 封装和分用

当应用程序采用TCP传送数据时，数据被送入协议栈中，然后，通过每一层直到被当做一串比特流传入网络中。其中每一层收到数据都会对数据增加一些首部信息（有的还需要尾部信息）。TCP传给IP的数据单元称为TCP报文段或简称为TCP段（UDP传给IP的数据单元称为UDP数据段），IP传给数据链路层的数据单元称为IP数据报。通过以太网传输的比特流称为帧。

![](https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240122103819.png)

当目的主机收到了一个以太网的数据帧时，数据要从协议栈中，由底往上，每一层都检查报文首部中的协议标识，以确定接收数据的上层协议，同时去掉各层协议上的报文首部。经过协议栈的分用过程后，最终传递给应用层，供目的主机上的应用程序使用。

![](https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240122111045.png)

### 疑问解答

**1、为什么就不能直接通过二层的帧在不同网络中进行传输呢？**

**不同网络**中的**统一标识**就是**三层地址（如IP地址）**，它**不能识别**二层的**MAC地址**。从上面的封装中我们可以得知，三层IP包**封装成帧**后，其中封装的**源和目的IP地址**作为**帧的数据部分**，不会改变。这些信息就是用来进行三层寻址的，且这些信息在帧传输过程中是不会改变的。

A网络发送给B网络的帧，在转发过程中，帧的**MAC地址不断变化**，但是**IP地址永远不变**。因为要不断靠MAC地址在局域网中寻找下一个转发节点或目的节点。



### 参考链接

- [1.从一个HTTP请求来看网络分层原理_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1V54y1y7c4?p=1)
- [数据链路层总结](http://manistein.club/post/network/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%80%BB%E7%BB%93/)
- [《深入理解计算机网络》](https://zhuanlan.zhihu.com/p/470493698)
- [一文读懂局域网、广域网、WLAN、WiFi的联系与区别](https://blog.csdn.net/wangyx1234/article/details/113444581)
- [什么是以太网？以太网的工作原理和用途](https://fiberroad.com.cn/what-is-ethernet)

