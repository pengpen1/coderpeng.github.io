---
<div  align="center">    <div  align="center">   <div  align="center">   title: three.js制作3D地图(一)
date: 2024-03-28 10:11:00
tags: three.js
categories: three.js
description: 因公司需求所致，我得拾起Three.js并制作一个3D地图，也顺便记录一下复习过程。阅读时长：7min。
cover: https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240326144804.gif
top_img: https://cdn.jsdelivr.net/gh/pengpen1/blog-images/20240326144804.gif
---
**概要：**在这篇记录中，我们将学习关于Three.js和制作3D地图的部分基础知识。

### 基础知识

如您所见，本篇文章的封面就是公司UI设计的动画效果图，看上去很难，其实一点都不简单。我们需要满足视角适配(倾斜的感觉)、波纹散点、飞线、背景呼吸效果。先来了解一些准备工作和基本知识吧：

1. **获取地图数据**：

   - 地图数据可以通过各种渠道获取，包括地理信息系统 (GIS) 数据库、在线地图服务 (如OpenStreetMap) 或专门提供地图数据的供应商。
   - GeoJSON 是一种常见的地理数据格式，它使用 JSON 格式来描述地理空间信息，如点、线、面等。GeoJSON 文件通常包含地图的几何信息、属性信息和空间参考信息。

2. **GeoJSON 的作用**：

   - GeoJSON 是一种开放的地理数据标准，它提供了一种简单且易于理解的方式来存储地理空间信息。
   - 使用 Three.js 制作 3D 地图时，GeoJSON 可以用来描述地图的几何形状，例如国家边界、城市位置等。

3. **墨卡托投影**：

   - 墨卡托投影是一种用于将地球表面的经纬度坐标投影到平面上的投影方法。它是最常用的地图投影之一，也被广泛应用于在线地图服务中。
   - 在制作基于 Web 的 3D 地图时，通常需要将地图数据转换为墨卡托投影坐标系，因为它适合在 Web 地图中显示，并且能够减少图形变形和失真。

4. **Polygon 和 MultiPolygon**：

   - 在地理信息系统（GIS）中，Polygon 和 MultiPolygon 是用于描述地理空间多边形的两种几何类型。
   - Polygon（多边形）：Polygon 是一种简单的几何类型，用于表示封闭的二维区域，通常由一组有序的点（顶点）组成，最后一个点会自动连接到第一个点，形成一个封闭的区域。
例如，一个国家的边界、一个湖泊的边界或者一个建筑物的外轮廓都可以用 Polygon 来描述。
   - MultiPolygon（多重多边形）：MultiPolygon 是一种复杂的几何类型，用于表示多个独立的、不相交的多边形组成的集合。每个 MultiPolygon 对象包含多个 Polygon 对象，每个 Polygon 表示一个独立的封闭区域。例如，一个国家可能由多个岛屿组成，每个岛屿的边界都可以用一个 Polygon 来描述，而这些岛屿的集合则可以用一个 MultiPolygon 来表示。

5. **图形学基础**： 

    <img src="https://cdn.jsdelivr.net/gh/pengpen1/blog-images/%E8%A7%86%E9%94%A5%E4%BD%93.png" width = "300" align=center />

上面这个是视锥体的透视图，对应着PerspectiveCamera的四个参数，fov — 摄像机视锥体垂直视野角度，
aspect — 摄像机视锥体长宽比，near — 摄像机视锥体近端面，far — 摄像机视锥体远端面。这个只是举例，原生WebGL和图形学是Three.js的底层知识，想要深入学习的话，图形学是少不了滴。书籍推荐，入门：《WebGL编程指南》 图形学：《交互式计算机图形学基于WebGL的自顶向下方法》



### **需求**

- 地图需要有三种颜色层级，未加入系统的省份：41, 68, 93，已加入系统的省份：42, 56, 68，近期上传数据的身份：58, 140, 166
- 描边以及追光效果





### 疑问解答

**1.计算机中内存、进程、线程各是什么？**

先说结论：内存是临时存储程序及其数据的地方，进程是操作系统中的一个执行实例，操作系统通过进程管理来确保多个程序能够并发执行，并且有效地利用计算机资源。而线程则是进程中的执行单元，它们共同协作以实现程序的运行。

1. **内存（RAM）：** 内存是计算机用于临时存储数据和程序的地方。它是一种易失性存储设备，这意味着当计算机关闭或断电时，存储在内存中的数据都会丢失。内存的主要目的是为了提供对数据的快速访问，因此相比于硬盘等存储设备，内存的读写速度要快得多。
2. **进程：** 进程是操作系统中的一个执行实例。当你启动一个程序时，操作系统会创建一个相应的进程来运行该程序。每个进程都拥有独立的内存空间，包括代码、数据、堆栈等。进程之间通常是相互隔离的，一个进程的数据不会直接影响到另一个进程。每个进程都有自己的资源分配和管理，包括内存、文件句柄等。
3. **线程：** 线程是进程中的一个执行单元。一个进程可以包含多个线程，这些线程共享进程的资源，如内存空间和文件句柄等。不同于进程，线程之间共享同一份内存空间，因此线程间的通信和数据共享更为方便。线程的创建和切换相对于进程来说开销较小，因此多线程编程常用于提高程序的并发性和性能。

在一个程序运行时，操作系统会为其创建一个进程，并在该进程内创建一个或多个线程，这些线程负责执行不同的任务。这些任务所需的数据会被加载到内存中，然后由对应的线程执行。当程序结束时，操作系统会释放进程及其所占用的内存空间，这些数据也会从内存中清除。





### 参考链接

- [用Three.js搞个炫酷的3D区块地图 - 掘金 (juejin.cn)](https://juejin.cn/post/7250375753598844983)


